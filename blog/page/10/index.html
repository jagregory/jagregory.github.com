
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>James Gregory</title>
  <meta name="author" content="James Gregory">

  
  <meta name="description" content="Recently, while working on my website I&#8217;ve become exposed to the Behaviour JavaScript library, which I may say is absolutely wonderful. Very &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.jagregory.com/blog/page/10">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  
  <link href="/atom.xml" rel="alternate" title="James Gregory" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cardo:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3186192-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<logo>

<img src="/logo.png" alt="Website Logo. Upload to /source/logo.png ; disable in /source/_includes/logo.html" height="32px" width="32px">
</logo>



<body >
  <header role="banner"><hgroup>
  <h1><a href="/">James Gregory</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

<br>
  
<!--
<ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
-->

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/just-so-you-know/">Personal Note: A Brief Interlude</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-03-07T00:00:00+11:00" pubdate data-updated="true">Mar 7<span>th</span>, 2006</time>
        
           | <a href="/writings/just-so-you-know/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/just-so-you-know/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently, while working on my website I&#8217;ve become exposed to the <a href="http://bennolan.com/behaviour/">Behaviour JavaScript library</a>, which I may say is absolutely wonderful. Very simple and straight forward, completely removes the need for those cursed script tags appended to the bottom of a page; something which I’ve never liked doing but became a bit of a necessary burden! In short it allows you to execute arbitrary code on elements in the DOM using CSS selectors; so, for example, you can apply an <code>onclick</code> event only to elements which match <code>form fieldset div#items a.add</code><sup>1</sup>, very handy indeed!</p>

<p>Outside of the web I got my hands on a copy of <a href="http://www.amazon.co.uk/exec/obidos/ASIN/B0007A5FZS/qid=1141728007/sr=8-1/ref=sr_8_xs_ap_i1_xgl/026-0724979-2170829">Star Wars: Empire at War</a>, which is easily the best Star Wars RTS game I’ve played (which isn’t hard). Very entertaining, if a little same-y after a while. Definitely worth playing though.</p>

<p>Even further outside of the web — in the real world — Sara and I got tickets for the Foo Fighters, Queens of the Stone Age and Motörhead show in Hyde Park, London. That should be an entertaining night and it’s a very good excuse to get ourselfs down to London again, a city we really enjoyed last time.</p>

<p><sup>1</sup> Any anchors with a class of “add”, within a div with an ID of “items” that itself is within a fieldset in a form tag.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/a-time-to-doodle/">A Time to Doodle</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-03-07T00:00:00+11:00" pubdate data-updated="true">Mar 7<span>th</span>, 2006</time>
        
           | <a href="/writings/a-time-to-doodle/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/a-time-to-doodle/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After being inspired by Kevin Cornell at <a href="http://www.bearskinrug.co.uk/">Bearskinrug</a> I finally decided to try a drawing tablet, one of those magical designer tools. I bought a <a href="http://www.amazon.co.uk/exec/obidos/ASIN/B0002DCL6G/026-0724979-2170829?%5Fencoding=UTF8">Trust 1200-V2 Wireless Scroll Tablet</a> from Amazon for a fairly reasonable £40, which was an absolute breeze to set up, windows picked it up without the need to install the drivers, which is always nice.</p>

<p>My main complaint with it is that I was unable to (logically) get the tablet to map to anything less than both of my monitors, which was rubbish because that meant the tablet was being stretched horizontally; so you couldn’t trace anything without it becoming distorted. I say logically, because last thing yesterday I somehow managed it, so my tablet maps to my primary monitor and my mouse continues to work across both - it’ll take me a bit of time to get used to swapping but it’s definitely worth it. I will try and figure out how I managed to get it working, so I can at least make a note of it for next time.</p>

<p>Now all I need to do is learn how to draw… I’m currently at <a href="http://neopoleon.com/">Rory</a>’s standard of drawing, which of course is amazing!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/venkman-for-firefox-1501-javascript-debugger/">Venkman for Firefox 1.5.0.1 (Javascript Debugger)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-02-07T00:00:00+11:00" pubdate data-updated="true">Feb 7<span>th</span>, 2006</time>
        
           | <a href="/writings/venkman-for-firefox-1501-javascript-debugger/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/venkman-for-firefox-1501-javascript-debugger/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Once again the guys at Mozilla have broken quite possibly the best plug-in for Firefox: the <a href="http://www.mozilla.org/projects/venkman/">Venkman Javascript Debugger</a>. This is becoming quite commonplace, with every update for firefox disabling the debugger until a fix is released.</p>

<p>Anyway, even though both the extensions manager and Venkmans official website both say there aren’t any updates available, Joe Walker from <a href="http://getahead.ltd.uk/home">Getahead</a> has created and update that contains some bug fixes from Bugzilla, but most importantly Venkman now works with Firefox 1.5.0.1!</p>

<p>Source: <a href="http://getahead.ltd.uk/ajax/venkman">Venkman for Firefox 1.5</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/first-working-weekend/">First Working Weekend</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-01-23T00:00:00+11:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2006</time>
        
           | <a href="/writings/first-working-weekend/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/first-working-weekend/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The weekend just past was my first that I’ve had to work since I left Tesco. Not an entirely unpleasant experience, although I would have much rather had my weekend.</p>

<p>The reason we had to work the weekend was down to us launching (re-launching actually) a product for the Swift Group’s extranet, something that a lot of people had been rather worried about. Mainly because, apparently, the previous time this product was launched it corrupted important data for six months without anyone noticing. Wonderful.</p>

<p>Something I wasn’t too happy about when I first inherited this project is that it was my sole responsibility. Slowly I came around to the idea though, it would be all my fault if everything went wrong, true, but it’d also be all down to me if everything went well; looks pretty good being responsible for a whole project only 10 months into a job.</p>

<p>Anyway, this is now day 1 of the launch at an end and a few niggling things aside, everything went swimmingly. No show stopping bugs at all, only minor things that took barely more than a minute to fix. I can safely say I’m in the good books.</p>

<p>Here’s to day 2 going as well as day 1.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/javascript-getnextelement-and-getpreviouselement-revised/">JavaScript getNextElement and getPreviousElement - Revised</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-01-12T00:00:00+11:00" pubdate data-updated="true">Jan 12<span>th</span>, 2006</time>
        
           | <a href="/writings/javascript-getnextelement-and-getpreviouselement-revised/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/javascript-getnextelement-and-getpreviouselement-revised/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>This is a very old post. Please, stop reading and just <a href="http://jquery.com/">download jQuery</a>.</p></blockquote>

<p>As I said I would be in my previous post, I’ve been working on improving getNextElement. I’ve improved the overall performance of the function and also created a few others with similar purpose; including the sister function getPrevious element. I outline all the functions and their uses below; you can find the download link at the top and bottom of this post.</p>

<p>Any bugs anyone finds don’t fret to email me or post a comment here, i’ll work on fixing them asap.</p>

<h2>The Functions</h2>

<h3>getNextElement &amp; getPreviousElement</h3>

<p>Basically this function is a more advanced, flexible version of the “element.nextSibling” and “element.previousSibling” properties. Features include the ability to specify the next element you’e looking for explicitly, so you can return the next list-item in a list (even if it happens to be a child of the current element) or the next matching node type. Also recursion is toggleable.</p>

<h3>getFirstChild &amp; getLastChild</h3>

<p>A core part of getNextElement/getPreviousElement, this function recursively searches an elements child nodes for a matching element. Can be used stand alone to only return from within an elements child structure; recursively parses the childNode structures of all child elements.</p>

<h3>getNextParent &amp; getPreviousParent</h3>

<p>Gets the next node in the DOM tree after the current nodes parent; this walks the DOM tree backwards until it finds a parent of the current node with a nextSibling/previousSibling present.</p>

<h3>isType</h3>

<p>Detects whether a specified element is of correct type; compares against a numerical value (nodeType) or a string value (tagName).</p>

<h2>The Examples</h2>

<p>Note: All functions that require an element as a parameter can either take a direct reference or a string ID value.</p>

<h3>getNextElement &amp; getPreviousElement</h3>

<p>Both functions take exactly the same parameters and are used in the same way, so I’ll only provide examples for one.</p>

<blockquote><p>Note: These functions also walk up the DOM tree, so if you have two lists and call getNextElement on the last list-item in the first list it will return the first item of the second list.</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the next element, regardless of type, after id.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the next list item, after id; could potentially be a child of id.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the next element with a nodeType of 1.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the next list-item that resides on the same level, or higher, as id; no child nodes are searched.</p>

<h3>Practical example:</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;popup&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>This is a popup<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;paragraph&quot;</span><span class="nt">&gt;</span>Below are some options:<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;list&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;</span>Your first choice<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;secondItem&quot;</span><span class="nt">&gt;</span>Your second choice<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would most likely return whitespace.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the H1 tag.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextElement</span><span class="p">(</span><span class="s1">&#39;paragraph&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the first list-item, “Your first choice”.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getPreviousElement</span><span class="p">(</span><span class="s1">&#39;secondItem&#39;</span><span class="p">,</span> <span class="s1">&#39;ul&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the UL element.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getPreviousElement</span><span class="p">(</span><span class="s1">&#39;paragraph&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the paragraph element.</p>

<h3>getFirstChild &amp; getLastChild</h3>

<p>Once again, both these functions take the same parameters and behave the same way so I’ll only provide examples for one.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the first child of id, regardless of type.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the first child of id that is a list-item.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the first child of id that has a nodeType of 1.</p>

<h3>Practical example:</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;popup&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>This is a popup<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;p&gt;</span>Below are some options:<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;</span>Your first choice<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>    <span class="nt">&lt;li&gt;</span>Your second choice<span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would most likely return a Text node with some whitespace.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the H1 element.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getFirstChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the first list-item, “Your first choice”.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getLastChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once again, probably whitespace.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getLastChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the UL element.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getLastChild</span><span class="p">(</span><span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the last list-item, “Your second choice”.</p>

<h3>getNextParent &amp; getPreviousParent</h3>

<p>Again, both these functions take the same parameters, so I’ll only show one.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextParent</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns the node next to the parent of id.</p>

<h3>Practical example:</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;first&quot;</span><span class="nt">&gt;</span>Item One<span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;second&quot;</span><span class="nt">&gt;</span>Item Two<span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getNextParent</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the second UL element.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">getPreviousParent</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would return the first UL element.</p>

<h3>isType</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">isType</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns true if id has a tagName of ‘li’.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">isType</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Returns true if id has a nodeType of 3.</p>

<p>Download: <a href="#" title="DOM Navigation javascript file">domnavigation-1.1.js</a> <em>(this download is no longer available, sorry)</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/ajax-and-security/">AJAX and Security</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-01-10T00:00:00+11:00" pubdate data-updated="true">Jan 10<span>th</span>, 2006</time>
        
           | <a href="/writings/ajax-and-security/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/ajax-and-security/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’ve been creating a content management system over the past few weeks with all the bells and whistles you’d expect from a new web project. One thing that has caught my eye is the potential security risk when using AJAX.</p>

<p>For said project I’ve been using the <a href="http://ajax.schwarz-interactive.de/csharpsample/default.aspx">Ajax.Net library</a> which, like most others, outputs wrapped calls to a server-side functions in javascript.</p>

<p>With that in mind then, surely anyone can open up the rendered source, see your methods and then execute them at will, potentially causing havoc. Initially I was using Ajax for most of my interaction with the server - something which seems pointless in hindsight. This meant that I had a create user function exposed to the public, potentially anyone could create themselves an account within the system by using the Javascript. This isn’t much of a problem from within the context of this project, because you can only ever view the page with the javascript when you’re authorised to create users; so it doesn’t make any difference. If this was public though, it could be a serious security risk. An example could be a comment form on a blog post, if you expose the method of creating a new comment through javascript then someone, with a little bit of work, could use the javascript to post automated comments.</p>

<p>Once again, nothing major but I think it is definitely something you should bare in mind when creating your pages. I guess the moral of this little story is don’t use Ajax for the sake of it and if you do use it make sure that the functions you are calling are harmless. Anything dealing with security should be left to post-backs but user experience improving features are fine - auto complete text boxes for example.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/prototype-periodicalexecuter-stop-javascript-function/">Prototype PeriodicalExecuter.stop() JavaScript Function</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2006-01-09T00:00:00+11:00" pubdate data-updated="true">Jan 9<span>th</span>, 2006</time>
        
           | <a href="/writings/prototype-periodicalexecuter-stop-javascript-function/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/prototype-periodicalexecuter-stop-javascript-function/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Download: <a href="#" title="Prototype extensions javascript file">prototype-extensions.js</a>. <em>(this download is no longer available, sorry)</em></p>

<p>I’ve been playing with the <a href="http://prototype.conio.net/">prototype framework</a> for a while now and am very impressed, the file size is a bit of a down point but that aside it’s excellent.</p>

<p>The one thing that has slightly irritated me (and <a href="http://roberthanson.blogspot.com/2005/11/prototypejs-periodicalexecuter.html" title=" Robert Hanson's Blog">others it seems</a>) is that there isn’t a stop function built into the PeriodicalExecuter object. Seems something strangly simple to miss out, especially as the Ajax.PeriodicalUpdater has one built in. With that in mind I’ve made an extension my self to perform this function.</p>

<p>I’ve simply placed the following code in a <a href="http://www.jagregory.com/downloads/prototype-extensions.js" title="Prototype extensions javascript file">prototype-extensions.js</a> file and referenced it wherever needed.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">PeriodicalExecuter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">registerCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">intervalID</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onTimerEvent</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">frequency</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">PeriodicalExecuter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">intervalID</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There’s really nothing much going on in this code, all it does is take the current registerCallback function (which creates the actual timer) and stores its returned interval ID which we then use in the new stop function with the native clearInterval method.</p>

<p>Here’s an example implementation where I fire the PeriodicalExecuter when a key is released in a text box and then stop it once the call completes, this was the main reason I created this extension, my aim was to have a waiting period of a few seconds before a ajax lookup is performed; mainly to cut down on server calls. Each time the textbox changes the PeriodicalExecuter gets reset and started again which means the function will only ever fire once the countdown is complete.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;changer&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pe</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;changer&#39;</span><span class="p">).</span><span class="nx">onkeyup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">pe</span><span class="p">)</span> <span class="nx">pe</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">pe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PeriodicalExecuter</span><span class="p">(</span><span class="nx">textChange</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">textChange</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;check textbox content against database here&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">pe</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I’m sure this method of extension is probably frowned upon from within the community and changes are expected to be submitted for the actual library, but I needed a fix asap and I’m sure a few other people might too.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/nested-datagridrepeater-with-key-value-access/">Nested DataGrid/Repeater With Key Value Access</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-10-20T00:00:00+10:00" pubdate data-updated="true">Oct 20<span>th</span>, 2005</time>
        
           | <a href="/writings/nested-datagridrepeater-with-key-value-access/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/nested-datagridrepeater-with-key-value-access/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my colleagues was having a problem with a datagrid nested in a repeater. We’ve done this kind of thing before with no problems, but this time the dataset wasn’t allowing key access to columns (i.e <code>Container.DataItem("ID")</code>). We toiled for quite some time trying to figure out why, with no avail. Eventually we just ended up using the direct index of the column; which worked fine as long as we didn’t change the column ordering.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='aspx-vb'><span class='line'><span class="nt">&lt;asp:Repeater</span> <span class="na">id=</span><span class="s">&quot;rptLogins&quot;</span> <span class="na">Runat=</span><span class="s">&quot;server&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ItemTemplate&gt;</span>
</span><span class='line'>    <span class="nt">&lt;%#</span> <span class="n">DataBinder</span><span class="p">.</span><span class="n">Eval</span><span class="p">(</span><span class="n">Container</span><span class="p">,</span> <span class="s">&quot;DataItem.Password&quot;</span><span class="p">)</span> <span class="nt">%&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;asp:DataGrid</span> <span class="na">id=</span><span class="s">&quot;dgUsageDetail&quot;</span> <span class="na">Runat=</span><span class="s">&quot;server&quot;</span> <span class="na">DataSource=</span><span class="s">&#39;%# Container.DataItem.Row.GetChildRows(&quot;myRelation&quot;) %&gt;&#39;</span> <span class="na">AutoGenerateColumns=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;Columns&gt;</span>
</span><span class='line'>        <span class="nt">&lt;asp:TemplateColumn</span> <span class="na">HeaderText=</span><span class="s">&quot;Date&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;ItemTemplate&gt;&lt;%#</span> <span class="n">DataBinder</span><span class="p">.</span><span class="n">Eval</span><span class="p">(</span><span class="n">Container</span><span class="p">,</span> <span class="s">&quot;DataItem(1)&quot;</span><span class="p">,</span> <span class="s">&quot;{0:dd/MM/yyyy}&quot;</span><span class="p">)</span> <span class="nt">%&gt;&lt;/ItemTemplate&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/asp:TemplateColumn&gt;</span>
</span><span class='line'>        <span class="nt">&lt;asp:TemplateColumn</span> <span class="na">HeaderText=</span><span class="s">&quot;Time&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;ItemTemplate&gt;&lt;%#</span> <span class="n">DataBinder</span><span class="p">.</span><span class="n">Eval</span><span class="p">(</span><span class="n">Container</span><span class="p">,</span> <span class="s">&quot;DataItem(1)&quot;</span><span class="p">,</span> <span class="s">&quot;{0:T}&quot;</span><span class="p">)</span> <span class="nt">%&gt;&lt;/ItemTemplate&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/asp:TemplateColumn&gt;</span>
</span><span class='line'>        <span class="nt">&lt;asp:TemplateColumn</span> <span class="na">HeaderText=</span><span class="s">&quot;Page Visited&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;ItemTemplate&gt;&lt;%#</span> <span class="n">Container</span><span class="p">.</span><span class="n">DataItem</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="nt">%&gt;&lt;/ItemTemplate&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/asp:TemplateColumn&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/Columns&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/asp:DataGrid&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/ItemTemplate&gt;</span>
</span><span class='line'><span class="nt">&lt;/asp:Repeater&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I was never happy with this solution, for the above reason. In my opinion if you’re referencing columns you should never, ever reference them by index because it’s making your code reliant on the physical structure of the database. Something you may not have any control over what-so-ever.</p>

<p>Anyway, just now I was working on my own little project (…on my lunch) and I needed to do the same thing; perfect time for some investigation. If you look at the DataSource of the above nested datagrid you’ll see it’s bound to the current rows <code>GetChildRows</code> method, ends up (fairly obviously in hind sight) this returns a simple 1-dimensional array of DataRow objects. These DataRow objects (to my knowledge) basically contain an internal array of values, these values map to their parents <code>Columns</code> collection. There’s no reference to the actual name of the column, hence why the key access doesn’t work.</p>

<p>The solution is quite simple. So simple it’s unbelievable… Replace <code>Row.GetChildRows("myRelation")</code> with <code>Row.CreateChildView("myRelation")</code>. This creates a DataView object of the child rows, so essentially it’s a mini-dataset for you to deal with as if it were standard. Keyed referencing is back in action!</p>

<blockquote><p>Note: For those that are wondering, a dataview isn’t actually a mini-dataset but a filtered view of its parent dataset.</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/sql-server-exists-function-quicker-than-count/">SQL Server: Exists() Function Quicker Than Count()</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-09-22T00:00:00+10:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2005</time>
        
           | <a href="/writings/sql-server-exists-function-quicker-than-count/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/sql-server-exists-function-quicker-than-count/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You&#8217;ve seen the title; it&#8217;s true.</p>

<p>I&#8217;ve been running an &#8220;administration&#8221; query to modify a table with around 190,000 records in. This table, segments, contains a status column called Coded. This value is derived from another table, faults. If any faults belonging to a segment has a coded status of 0 then the segment coded value is also 0.</p>

<p>My query did an update on each row in the segments table, retrieving a <code>count</code> of how many faults there are with a coded status of <code>0</code> that belong to the current segment. If the <code>count</code> is greater than <code>0</code> then the segment coded is set to <code>0</code>, otherwise to <code>1</code>.</p>

<p>It ran for over 2 hours without any sign of finishing.</p>

<p>I changed the query to do a simple case statement with an <code>exists</code> on the faults table where <code>Coded = 0</code> and it’s just finished in 4 minutes. Unbelievable.</p>

<h3>Update</h3>

<p>I thought I should give a bit of an explanation as to why this is happening. It basically all boils down to the way the two functions operate that makes the biggest difference. A <code>count</code> statement counts every row that matches the where statement, so even if you only need to know about one record (like in my case) it’ll still read every other row too. On the other hand the <code>exists</code> function will return as soon as its conditions are met, so if the first row it finds matches it’ll only read one row.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/datediff-minus-one-visualbasic-assembly/">DateDiff() Minus One VisualBasic Assembly</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-09-16T00:00:00+10:00" pubdate data-updated="true">Sep 16<span>th</span>, 2005</time>
        
           | <a href="/writings/datediff-minus-one-visualbasic-assembly/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/datediff-minus-one-visualbasic-assembly/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m not a big fan of using the <code>Microsoft.VisualBasic</code> assembly, I avoid it at all costs basically.</p>

<p>As we all know, the visual basic assembly comes with a large collection of built-in functions one of which is the <code>DateDiff</code> function. This takes two dates and a comparison value (e.g. <code>d</code> for day) and then spits out the difference.</p>

<p>Here’s the same thing just minus the visual basic usage:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">DateTime</span> <span class="n">firstDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
</span><span class='line'><span class="n">DateTime</span> <span class="n">secondDate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DateTime</span><span class="p">(</span><span class="m">2005</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">20</span><span class="p">);</span>
</span><span class='line'><span class="n">TimeSpan</span> <span class="n">difference</span> <span class="p">=</span> <span class="n">secondDate</span><span class="p">.</span><span class="n">Subtract</span><span class="p">(</span><span class="n">firstDate</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// days: difference.Days</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Website copyright &copy; 2014 - James Gregory |
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/TheChymera/Koenigspress">Königspress</a></span>.
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jagregory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
