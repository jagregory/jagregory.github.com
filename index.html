
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>James Gregory</title>
  <meta name="author" content="James Gregory">

  
  <meta name="description" content="It started out as an attempt to read Michael Abrash&#8217;s Graphics Programming Black Book over the Christmas period. It turned into a epic mission &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.jagregory.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="James Gregory" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cardo:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3186192-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<logo>

<img src="/logo.png" alt="Website Logo. Upload to /source/logo.png ; disable in /source/_includes/logo.html" height="32px" width="32px">
</logo>



<body >
  <header role="banner"><hgroup>
  <h1><a href="/">James Gregory</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

<br>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.jagregory.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<!--
<ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
-->

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/michael-abrash-graphics-programming-black-book/">Michael Abrash&#8217;s Graphics Programming Black Book</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-20T06:45:00+11:00" pubdate data-updated="true">Jan 20<span>th</span>, 2014</time>
        
           | <a href="/writings/michael-abrash-graphics-programming-black-book/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/michael-abrash-graphics-programming-black-book/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It started out as an attempt to read Michael Abrash&#8217;s Graphics Programming Black Book over the Christmas period. It turned into a epic mission of <code>grep</code>, <code>sed</code>, and <code>awk</code>, and a few blisters.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/writings/michael-abrash-graphics-programming-black-book/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/compiled-templates-for-go/">Compiled Templates for Go</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-14T16:12:00+11:00" pubdate data-updated="true">Oct 14<span>th</span>, 2013</time>
        
           | <a href="/writings/compiled-templates-for-go/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/compiled-templates-for-go/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/jagregory/cote">Cote</a> is a compiled templating language for <a href="http://golang.org">Go</a>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/writings/compiled-templates-for-go/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/go-slice-visualiser/">Go Slice Visualiser</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-07T16:30:00+10:00" pubdate data-updated="true">Jul 7<span>th</span>, 2013</time>
        
           | <a href="/writings/go-slice-visualiser/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/go-slice-visualiser/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve been learning <a href="http://golang.org">Go</a> recently; it&#8217;s been fun.</p>

<p>An interesting aspect of Go is <a href="http://blog.golang.org/go-slices-usage-and-internals">Slices</a>, which are lightweight views of an array. Why these are useful and necessary makes more sense when you understand Go&#8217;s <a href="http://golang.org/doc/faq#pass_by_value">pass-by-value</a> semantics.</p>

<p>Whilst playing with slices, I put together a little visualiser to help understand their behaviour (the act of building it was probably more useful than the end result).</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/writings/go-slice-visualiser/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/rails-500-error-showing-in-dev/">Rails Production 500 Error Page Showing in Dev</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-05T00:00:00+10:00" pubdate data-updated="true">Jul 5<span>th</span>, 2012</time>
        
           | <a href="/writings/rails-500-error-showing-in-dev/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/rails-500-error-showing-in-dev/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>We&#8217;re sorry, but something went wrong!</p></blockquote>

<p>I&#8217;ve been seeing some strange behaviour on the development environment for <a href="http://www.getonthegame.com.au">On the Game</a> recently. I&#8217;ve just spent an hour combing through every line of code that varies from a standard Rails app, and I&#8217;ve finally found the issue. I&#8217;m putting it here for posterity.</p>

<p>Regardless of my configuration, Rails was always displaying the production page for 500 errors (e.g. <code>public/500.html</code>) even in development mode.</p>

<p>I poked around for a while and eventually found it to be this:</p>

<p>I&#8217;d redefined <code>Enumerable#sum</code> somewhere (don&#8217;t ask!), and my implementation didn&#8217;t handle arrays of strings. That&#8217;s it, that&#8217;s why the detailed error page wasn&#8217;t being shown in development.</p>

<p>Ends up, <code>Enumerable#sum</code> is used by the development error page, and when something on that error page itself raises an error Rails will just fall back and show the 500.html and not log anything.</p>

<p>Moral of the story: If you&#8217;re seeing this behaviour, check you haven&#8217;t (badly) monkey patched something that the error page is using.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/learning-it-aint-hard">Learning. It Ain&#8217;t Hard.</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-06T00:00:00+10:00" pubdate data-updated="true">Jul 6<span>th</span>, 2011</time>
        
           | <a href="/writings/learning-it-aint-hard#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/learning-it-aint-hard">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8220;I don&#8217;t have enough free time to learn a new language!&#8221;, or tool, or framework, etc. I hear this often. I appreciate we all handle things differently, but here&#8217;s my take on it.</p>

<p>I remember years ago, some friends and I were talking about money and our savings accounts. They were flabbergasted at how I, a 19 year old at the time, were able to have nearly £10,000 saved (sadly which I&#8217;ve since spent!). I explained that it&#8217;s easy to save money if you do it slowly and consistently. £50 a week over the course of three years adds up. Obvious, right?</p>

<p>You don&#8217;t sit down and decide &#8220;I&#8217;m going to save £10,000&#8221; and then promptly spend one month working yourself to death to put away the whole amount in one go. It&#8217;d be nice to have the option to do that occasionally, but that&#8217;s not how most of us work. The same applies to learning.</p>

<p>You don&#8217;t need to read a 300 page book to learn something. Read a blog post (or an article, mailing list thread, commit discussion). One. Pick a subject and read a single article on it. Do this once a week, every week. That&#8217;s it, that&#8217;s my secret to learning.</p>

<p>Knowledge isn&#8217;t a substitute for experience, but it&#8217;ll certainly get you a lot further down the road, faster, than you would get without it.</p>

<p>Take Ruby as the typical example. Ruby on Rails has been around for 6 years now (and Ruby for nearly 15, but not visibly), if you&#8217;d have read one article on Ruby a week, you&#8217;d have read 312 by now. Three hundred and twelve. Combine that with the occasional Sunday afternoon playing around and I&#8217;m confident you&#8217;d be pretty proficient by now.</p>

<ul>
<li>Javascript is around 15 years old.</li>
<li>Haskell, 20 years.</li>
<li>Erlang, 25 years.</li>
<li>Python, 20 years.</li>
<li>Clojure, 4 years. Scheme? 36 years.</li>
</ul>

<p>Of course, we&#8217;ve not all been trying to learn those languages for as long as they&#8217;ve existed. Consider this though, in one year you could be proficient in a new language if you commit to just 15 minutes a week, or you could be in exactly the same place you are now still unable to find time to learn anything.</p>

<p>How do you eat an elephant? <em>One bite at a time.</em></p>

<h2 id="addendum_but_everything_moves_so_fast">Addendum: but everything moves so fast!</h2>

<p>No, it doesn&#8217;t. It just feels like that from the inside.</p>

<p>Learn something fundamental and your knowledge will transcend trends. Learning a new language is a great way to do that whilst also feeling cool and trendy. Ruby or Python will help you understand dynamic languages, Scala will make you appreciate how powerful and unobtrusive static languages can be, and Clojure will introduce the code-as-data mindset. All those things will be useful beyond the scope of the language you&#8217;re learning.</p>

<p><em>Stealth edit: Fixed my amazing saving ability.</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/rhino-licensing/">Rhino Licensing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-11T00:00:00+11:00" pubdate data-updated="true">Jan 11<span>th</span>, 2011</time>
        
           | <a href="/writings/rhino-licensing/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/rhino-licensing/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>As one of the last things on my to-do list for <a href="http://inca-app.com">Inca</a>, licensing has been delayed and delayed; finally, with me making the announcement on Twitter the other day I felt I should probably get it sorted. I was going to write a nice long post about my thoughts on anti-piracy measures, but the <a href="http://blogs.balsamiq.com/product//2008/10/19/my-views-on-software-piracy/">Balsamiq team have already done it nicely</a>.</p>

<p>Instead, here&#8217;s a guide to using <a href="https://github.com/ayende/rhino-licensing">Rhino Licensing</a>. Your mileage may vary.</p></blockquote>

<p><a href="https://github.com/ayende/rhino-licensing">Rhino Licensing</a> is an open-source licensing framework by <a href="http://ayende.com">Ayende Rahien</a>, and it grew out of his frustration with other license providers while creating <a href="http://nhprof.com/">NHibernate Profiler</a>.</p></p>

<p>Rhino Licensing uses asymmetric encryption&#8211;also known as <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">public-key cryptography</a>&#8211;specifically the <a href="http://en.wikipedia.org/wiki/RSA">RSA algorithm</a>. In cryptography, asymmetric means there are two parts to each key, one public and one private. You encrypt a value using the one key, and it can only be decrypted using the other key. In the case of license key generation, we store our private key on the server (and never tell anyone it!), and distribute the public key with our application. When the user receives a license key, the application is able to verify that it came from us by using the public key. If someone tries to use a license key they&#8217;ve generated themselves, it wouldn&#8217;t work unless they had our exact private key.</p>

<blockquote><p>Other systems that use asymmetric encryption include <abbr title="Secure Shell">SSH</abbr>, <abbr title="Secure Sockets Layer">SSL</abbr>, <abbr title="Pretty Good Privacy">PGP</abbr>, and among others, Git uses asymmetric encryption for its security due to it using SSH.</p></blockquote>

<p>The format of the license that Rhino Licensing generates is an XML document, plain and simple. By default, it includes the user&#8217;s name, an expiration date, the type of license (trial, standard, floating, etc&#8230;), and most importantly the cryptographic signature. Below is an example Rhino Licensing generated license.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;license</span> <span class="na">id=</span><span class="s">&quot;ae4c05b5-c188-47f8-852f-b4e5375621f7&quot;</span>
</span><span class='line'>    <span class="na">expiration=</span><span class="s">&quot;2011-01-01T00:00:00.0000000&quot;</span> <span class="na">type=</span><span class="s">&quot;Standard&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;name&gt;</span>Bilbo<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>  <span class="nt">&lt;Signature</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;SignedInfo&gt;</span>
</span><span class='line'>      <span class="nt">&lt;CanonicalizationMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;SignatureMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nt">&lt;Reference</span> <span class="na">URI=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;Transforms&gt;</span>
</span><span class='line'>          <span class="nt">&lt;Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/Transforms&gt;</span>
</span><span class='line'>        <span class="nt">&lt;DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;DigestValue&gt;</span>sKDT7gzgedzmh1AMxxLbfcF1Hsw=<span class="nt">&lt;/DigestValue&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/Reference&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/SignedInfo&gt;</span>
</span><span class='line'>    <span class="nt">&lt;SignatureValue&gt;</span>
</span><span class='line'>        SfkvCGv1+EdLTvaROv27ymDumS0y02fPANTVhr0Yxd/
</span><span class='line'>        AxxVH0q0BQ6w8Ou5L7gyLYLvnSckgjhrGnGpiifdvbg==
</span><span class='line'>    <span class="nt">&lt;/SignatureValue&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/Signature&gt;</span>
</span><span class='line'><span class="nt">&lt;/license&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><h2>What&#8217;s a signature?</h2>

<p>A cryptographic signature is a string of bytes used to aid in verification of the source of a document. In most cases&#8211;and in the case of Rhino Licensing&#8211;the signature is generated by hashing the content of the file using SHA1 (or another suitable hashing algorithm), and encrypting that hash using the private key. The resulting string of bytes is the signature.</p>

<p>When the client receives a file with a signature, it creates a hash of the file (sans-signature) and compares that hash to the decrypted value of the signature. Baring in mind that the signature is an encrypted hash of the file, if either of the public or private keys were invalid or the file had been tampered with, then the decrypted string would not match the hash of the file. When the client generated hash and the decrypted signature match, you can be confident the sender of the message is who you think it is.</p></blockquote>

<p>The great part about using the hash of the document as the signature is that if the user tampers with the license&#8211;such as changing the expiration date or the licensee name&#8211;the signature will no longer match the hash the client generates, and BAM, instant invalid license.</p>

<blockquote><p>One particular aspect I like with this approach is that the licensee name is clearly visible in the license. This simple act can be quite dissuasive when it comes to piracy; after all, who would want their name visible on all the torrent websites out there?</p></blockquote>

<p>Enough with the waffle, let&#8217;s start using Rhino Licensing.</p>

<h2>Create your key</h2>

<p>The first thing we need to do is generate a public/private key pair for us to use in our license generation. Rhino Licensing uses the RSACryptoServiceProvider for it&#8217;s keys, so we can use that ourselves to generate our keys. One of the simplest ways to do that is to knock up a really quick console application.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">class</span> <span class="nc">Program</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">rsa</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RSACryptoServiceProvider</span><span class="p">(</span><span class="m">1024</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">File</span><span class="p">.</span><span class="n">WriteAllText</span><span class="p">(</span><span class="s">&quot;publicKey.xml&quot;</span><span class="p">,</span> <span class="n">rsa</span><span class="p">.</span><span class="n">ToXmlString</span><span class="p">(</span><span class="k">false</span><span class="p">));</span>
</span><span class='line'>    <span class="n">File</span><span class="p">.</span><span class="n">WriteAllText</span><span class="p">(</span><span class="s">&quot;privateKey.xml&quot;</span><span class="p">,</span> <span class="n">rsa</span><span class="p">.</span><span class="n">ToXmlString</span><span class="p">(</span><span class="k">true</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Done&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That program will generate a new key for you and write out the public and private parts to two separate XML files (publicKey.xml and privateKey.xml). Keep these two files handy!</p>

<blockquote><p>You will probably want to change the <code>1024</code> value in the <code>RSACryptoServiceProvider</code> constructor to something larger. This is the size of the key that will be generated. The larger the better really, but larger numbers require longer to generate.</p></blockquote>

<h2>Update your application</h2>

<p>Now we&#8217;ll update your application to complain if it doesn&#8217;t have a license. In your entry-point for your application you need to assert the license. Before we do that, make sure you&#8217;ve got your public key handy from the previous step. Rhino Licensing needs the <em>content</em> of this file, so you can either embed it directly into a constant or as a resource. Secondly, it needs to know where to look for a license that the user will have been given.</p>

<p>Assuming a really simple app, here&#8217;s a Program.cs with Rhino Licensing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">class</span> <span class="nc">Program</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">publicKey</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="n">ReadAllText</span><span class="p">(</span><span class="s">&quot;publicKey.xml&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">new</span> <span class="nf">LicenseValidator</span><span class="p">(</span><span class="n">publicKey</span><span class="p">,</span> <span class="s">&quot;license.xml&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">.</span><span class="n">AssertValidLicense</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the license.xml file doesn&#8217;t exist, or if it&#8217;s invalid, Rhino Licensing will throw an exception. Of course, as we haven&#8217;t generated a license yet we&#8217;ll get an exception. That&#8217;s the client done though, so we can move on to our final step now. Once we complete that step, you will be able to just drop a license.xml into the same directory as your application and everything will work as expected.</p>

<h2>Create the license generator</h2>

<p>We need something to actually generate a license for your users. If you were being all fancy you could do this as a web-service that gets integrated with your payment provider; however, for simplicity&#8217;s sake we&#8217;ll just create another console application that spits out a license.</p>

<p>Rhino Licensing has a few prerequisites for a license: A name, an id of the license, an expiration date, and a license type. You can also supply a dictionary of custom values, but we wont be using that in this example.</p>

<p>For a really simple license generator all you need is the above for each license, and the private key. We&#8217;ll wrap that up in a simple console app which&#8217;ll prompt for the required info:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">class</span> <span class="nc">Program</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">privateKey</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="n">ReadAllText</span><span class="p">(</span><span class="s">&quot;privateKey.xml&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">var</span> <span class="n">id</span> <span class="p">=</span> <span class="n">Guid</span><span class="p">.</span><span class="n">NewGuid</span><span class="p">();</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">generator</span> <span class="p">=</span> <span class="k">new</span> <span class="n">LicenseGenerator</span><span class="p">(</span><span class="n">private_key</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Name: &quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">name</span> <span class="p">=</span> <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Date: &quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">expirationDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Type: &quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">LicenseType</span> <span class="n">licenseType</span> <span class="p">=</span> <span class="p">(</span><span class="n">LicenseType</span><span class="p">)</span><span class="n">Enum</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">LicenseType</span><span class="p">),</span> <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">());</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// generate the license</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">license</span> <span class="p">=</span> <span class="n">generator</span><span class="p">.</span><span class="n">Generate</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">expirationDate</span><span class="p">,</span> <span class="n">licenseType</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">();</span>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">license</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Console</span><span class="p">.</span><span class="n">ReadKey</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s it, you&#8217;ve got a license generator. Remember, this will exist behind your firewall, the users will (and must) never see your private key.</p>

<p>If you take the output of this application and save it in a license.xml file in your client, your application should stop throwing license exceptions and run normally! You&#8217;ve officially just licensed your app.</p>

<h2>What have we just done?</h2>

<ul>
<li>Created a private key generator, purely for convenience than anything else. We should only need to run this once before we start generating our keys. You could run it once per major release to ensure your 1.0 licenses are never compatible with 2.0.</li>
<li>Updated our client application to validate the presence and validity of a license (and to explode if there isn&#8217;t one).</li>
<li>Created a &#8220;server&#8221; to generate licenses for us. This is very primitive but could easily be adapted to a web server. You might want to look at the Rhino Licensing <a href="https://github.com/ayende/rhino-licensing/blob/master/Rhino.Licensing/LicensingService.cs">LicensingService</a> before you continue.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/ndc-2010/">NDC 2010</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-22T00:00:00+10:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2010</time>
        
           | <a href="/writings/ndc-2010/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/ndc-2010/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><a href="http://www.ndc2010.no">NDC 2010</a> was a huge success, if you ask me. This was largely down to the NDC team, who deserve all the praise they&#8217;re getting (and much more). Unlike conferences I&#8217;ve been to in the past, NDC was truely by the people, for the people. <a href="http://blog.scottbellware.com">Scott Bellware</a> put it much better than I could, with his <a href="http://blog.scottbellware.com/2010/06/praise-for-norwegian-developers.html">praise for Norwegian Developers</a> (and Kjersti Sandberg). Herself and the rest of the team were there because they wanted to be, not because they had to. The whole attitude surrounding this conference was one of learning, not plugging products or motives.

I could go into great detail about the individual aspects of the conference, but it&#8217;s much easier to say that there&#8217;s nothing I&#8217;d change.

If there&#8217;s one conference you should go to next year, make it NDC 2011.

<h2>My part in all this&#8230;</h2>

I presented on two topics at NDC; the first was an introduction to <a href="http://fluentnhibernate.org">Fluent NHibernate</a>, and the second an introduction and demo of <a href="http://git-scm.com">Git</a>. Fluent NHibernate was on the Thursday, and Git the Friday. It was a great experience speaking at an event of this size, and the number of people who seemed genuinely interested in what I had to say (by either turning up to my talks, or approaching me afterwards) was quite humbling. If you&#8217;re interested in seeing what I presented, the talks will be on the NDC website before too long.

<blockquote>The videos are becoming available at <a href="http://streaming.ndc2010.no">streaming.ndc2010.no</a>, but they&#8217;re suffering from bandwidth issues. If you do want to watch the videos, please stream them until the issues are resolved.</blockquote>

Due to me speaking, and also being woefully unprepared, I didn&#8217;t get to see as many talks as I would&#8217;ve liked &mdash; regardless of how well rehearsed and prepared my talks are, it seems I always end up rewriting them an hour before I go on &mdash; I did end up catching Lisa Crispin, Steve Strong, Eric Evans, Greg Young, Jon Skeet, Roy Osherove, Michael Feathers, Sebastian Lambla, and Mark Nijhof. I recommend you catch their talks online when they&#8217;re published. The quality of the talks at NDC have been significantly higher than I&#8217;ve seen elsewhere, and (more importantly) the technical level seems to be higher too; there was very few basic talks (a few introductions, mine included, but no pandering), but the majority were pretty in-depth. This is quite a contrast to the all-too-often &#8220;Microsoft technology of the week&#8221; presentations you can get at conferences.

Of course, a big part of any conference is what happens between (and after) the talks. Meeting other developers is a big part of why I go to these things, after all I don&#8217;t get out much normally. The socialising aspect of NDC was excellent, good drinks and food was had by all (I have a good idea they did anyway, at least one place we ate refused to serve us as a group anything other than the same meal for everyone!). I can&#8217;t possibly list everyone who I met while I was out there, but it was really good to meet up with some people who I&#8217;ve known on Twitter for a long time; specifically Hadi Hariri, Steve Strong, Greg Young, Ben Hall, Seb Lambla, Mark Nijhof, and Rob Conery are ones that stand out to me right now.

NDC 2011 will be next year, and it&#8217;s looking like it&#8217;ll be in May this time. If there&#8217;s anyone that&#8217;s on the fence about going, I would whole heartedly recommend you do. Even more so, I&#8217;d recommend you submit a talk of your own. It&#8217;s a great way to test yourself, if nothing else. I&#8217;ll definitely be going next year; hopefully I&#8217;ll speak again, but if not I&#8217;ll still be there. Hope to see you there!
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/speaking-engagements-2010/">Speaking Engagements in 2010</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-31T00:00:00+11:00" pubdate data-updated="true">Mar 31<span>st</span>, 2010</time>
        
           | <a href="/writings/speaking-engagements-2010/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/speaking-engagements-2010/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">In an attempt to get out of my shell more this year, I&#8217;ve taken up speaking (at conferences, not just in general). First came my <a href="http://jagregory.com/writings/git-e-van-recording/">Git E-VAN</a>, then came <a href="http://fiesta.lostechies.com/">Pablo&#8217;s Fiesta</a>, so what else have I got lined up this year?

<strong>24<sup>th</sup> April</strong>: <a href="http://codingday.org/">Irish Open Spaces Coding Day II</a> in Dublin, where I&#8217;ll be speaking about <a href="http://fluentnhibernate.org">Fluent NHibernate</a>.

<strong>16<sup>th</sup>-18<sup>th</sup> June</strong>: <a href="http://ndc2010.no" title="Norwegian Developers Conference 2010">NDC 2010</a> in Oslo, speaking about <a href="http://fluentnhibernate.org">Fluent NHibernate</a> and DVCS with Git.

The abstracts for my talks can be found below. If you&#8217;re interested in hearing me speak, or know of any opportunities that you think I might be interested in, please drop me an email (<a href="mailto:james@jagregory.com">james@jagregory.com</a>). You can see my availability on my <a href="http://www.google.com/calendar/embed?src=mtbk7g2u13e2j7s1u8p0flitho@group.calendar.google.com&ctz=Europe/London&gsessionid=GBDJzqgaRWqAze87fNda9Q">speaking calendar</a>.

<h3>Fluent NHibernate</h3>

An introduction and overview to object⁄relational mapping using Fluent NHibernate. See how Fluent NHibernate can help you map your domain with the least amount of effort, how you can remain flexible with your database, and how to drive your design through convention–over–configuration; all without writing a single line of XML.

The talk is an introduction to Fluent NHibernate for those that aren&#8217;t familiar with it, and assumes some NHibernate experience and is for .Net developers primarily. The goal is to show people how low–impact NHibernate can be with Fluent NHibernate, and how it can actually speed up development in rapid–change environments.

I&#8217;ll cover an overview of what Fluent NHibernate is, the various parts of it (the fluent interface, the conventions, and the auto–mappings, and the configuration aspect), then expand on how these features can be utilised to improve your NHibernate experience and simplify your development process.

<h3>Introduction to Git</h3>

An introduction to distributed version control using Git, and how your VCS should work with you and not against you. How DVCS can completely alter your development process, streamline it, and help you produce better software, faster. Covering how local repositories speed up your development, multiple authoritative sources, distributed teams, multiple workflows, and some of the more distinct features of Git. With experiences from an OSS team on how the migration from SVN to Git has helped the project and changed how the team works (Fluent NHibernate).
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/git-e-van-recording/">Git E-VAN Recording</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-17T00:00:00+11:00" pubdate data-updated="true">Feb 17<span>th</span>, 2010</time>
        
           | <a href="/writings/git-e-van-recording/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/git-e-van-recording/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last monday (8th of Feb) I did an <a href="http://jagregory.com/writings/git-e-van/">E-VAN on Git</a>; an introductory talk on Git and DVCS, covering pretty much everything you need to know for day-to-day Git life. I think it went down well, certainly didn&#8217;t <em>hear</em> anyone complaining.</p>

<p>The talk was recorded, so if you haven&#8217;t already seen it then you can do so at your own leisure.</p>

<p>The video is up on the <a href="http://vimeo.com/user1286822">E-VAN&#8217;s Vimeo account</a>, specifically <a href="http://vimeo.com/9324683" title="Git E-VAN recording">here</a>.</p>

<object width="600" height="450"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=9324683&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=9324683&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="600" height="450"></embed></object>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/writings/git-e-van/">Git E-VAN</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-08T00:00:00+11:00" pubdate data-updated="true">Feb 8<span>th</span>, 2010</time>
        
           | <a href="/writings/git-e-van/#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com/writings/git-e-van/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just a reminder that tonight I&#8217;ll be doing an <a href="http://europevan.blogspot.com/2010/01/next-european-van-on-08-february-2010.html">E-VAN on Git</a> tonight at 7pm GMT.</p>

<p>It&#8217;s going to be a pretty basic talk on what Git is (and indirectly what DVCS is), and a demo on how to use most of the features you&#8217;ll need daily. There might be some advanced talk at the end, depending on how well I time things.</p>

<p>If you&#8217;ve already used Git (successfully), then this talk won&#8217;t really be for you; unless you just want to listen to me ramble for an hour and an half.</p>

<p>Looking forward to &#8220;seeing&#8221; you there. Now, I best finish reading that &#8220;Getting started with Git&#8221; book I&#8217;ve had lying around for months.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Website copyright &copy; 2014 - James Gregory |
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/TheChymera/Koenigspress">Königspress</a></span>.
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jagregory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
