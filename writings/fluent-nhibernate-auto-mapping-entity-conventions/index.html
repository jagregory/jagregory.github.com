<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>James Gregory</title>
    <meta name="description" content="Code monkey. ThoughtWorks. Chief Agitator.
" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

</head>
<body class="post-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Fluent NHibernate: Auto Mapping Entity Conventions</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2009-01-11">11 Jan 2009</time>
                
            </section>
        </header>

        <section class="post-content">
            <blockquote>
  <p><strong>Notice:</strong> The content in this post is out of date, please refer to the <a href="https://github.com/jagregory/fluent-nhibernate/wiki/Auto-mapping">Auto Mapping</a> page in the <a href="https://github.com/jagregory/fluent-nhibernate/wiki">Fluent NHibernate Wiki</a> for the latest version.</p>
</blockquote>

<p>This post should be short and sweet. We want to alter our <strong>has many</strong> relationship from <code>Shelf</code> to <code>Product</code> so that it has a cascade set on it. We don&#8217;t want this to affect all one-to-many&#8217;s in our domain, so we need to do this alteration only on the <code>Shelf</code> entity rather than with an <code>ITypeConvention</code>.</p>

<p>So how exactly do you supply conventions only for a specific entity? Easy! with <code>ForTypesThatDeriveFrom<t>(ClassMap<t>).

``` csharp
autoMappings
  .WithConvention(convention =&gt;
  {
    // our conventions
  })
  .ForTypesThatDeriveFrom<shelf>(map =&gt;
  {
    map.HasMany<product>()
      .Cascade.All();
  });
```

<p>The <code>ForTypesThatDeriveFrom</code> method takes a generic parameter that&#8217;s the entity you want to customise. The parameter is an expression that allows you to alter the underlying <code>ClassMap<t> that is generated by the auto mapper. Anything you can do in the non-auto fluent mapping, you can do in this override. So for our case, we map a <code>HasMany</code> of <code>Product</code>, and specify it&#8217;s cascade; this overrides the <code>HasMany</code> that will have been generated by the auto mapper.

<p>That&#8217;s it. We&#8217;ve overridden the auto mapping explicitly for a specific type, while not affecting the general conventions of the system. You can do this for as many types as you need in your domain; however, baring in mind readability, it may sometimes be more appropriate to map entities explicitly using the standard fluent mapping if you find yourself overriding a lot of conventions.</p>
</t></code></p></product></shelf></t></t></code></p>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            

            
        </footer>
    </article>
</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="mailto:james@jagregory.com">James Gregory</a> &copy;
               &bull; All content licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">cc by-nc-sa 4.0</a>.
      </section>
    </footer>

    <script type="text/javascript" src="/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
</body>
</html>
