
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Static Method Abuse - James Gregory</title>
  <meta name="author" content="James Gregory">

  
  <meta name="description" content="I dislike static methods, there I said it. Like everything, they have their place; but as the old analogy says, when you have a hammer everything &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.jagregory.com/writings/static-method-abuse">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="James Gregory" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Cardo:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3186192-13']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<logo>

<img src="/logo.png" alt="Website Logo. Upload to /source/logo.png ; disable in /source/_includes/logo.html" height="32px" width="32px">
</logo>



<body >
  <header role="banner"><hgroup>
  <h1><a href="/">James Gregory</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

<br>
  
<!--
<ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
-->

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Static Method Abuse</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-28T00:00:00+11:00" pubdate data-updated="true">Mar 28<span>th</span>, 2008</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://www.jagregory.com">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I dislike static methods, there I said it.</p>

<p>Like everything, they have their place; but as the old analogy says, when you have a hammer everything looks like a nail. <strong>Static methods are being abused.</strong></p>

<h2>Don&#8217;t make me instantiate</h2>

<p>For some reason programmers seem to be allergic to instantiating objects, to the point of where half the functionality is implemented in static classes and methods. You can go for days without seeing an instance in my current project&#8217;s code-base.</p>

<p>I think it&#8217;s symptomatic of a bigger problem. If you think creating instances is wasteful, maybe you&#8217;re creating too many. You&#8217;re most likely violating the Single Responsibility Principal (SRP) or Separation of Concerns (SoC). Too many dependencies usually means your class is trying to do too much, get it spit-up, and get it clean.</p>

<h2>State vs. stateless</h2>

<p>One justification for using static methods that is often touted around is that if a method doesn&#8217;t have any state, then it should be static. To me this is a fallacy, because state isn&#8217;t everything. Take the following repository example:</p>

<h3>Using static methods</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">Customer</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">Repository</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;.</span><span class="n">FindByID</span><span class="p">(</span><span class="m">102</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">customer</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;James&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">Repository</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;.</span><span class="n">Save</span><span class="p">(</span><span class="n">customer</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Using an instance</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="n">IRepository</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;</span> <span class="n">repos</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Repository</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;();</span>
</span><span class='line'>
</span><span class='line'><span class="n">Customer</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">repos</span><span class="p">.</span><span class="n">FindByID</span><span class="p">(</span><span class="m">102</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">customer</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;James&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">repos</span><span class="p">.</span><span class="n">Save</span><span class="p">(</span><span class="n">customer</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Noticably the first example is one line less than the second. However, it&#8217;s compromising readability in removing that line. Instead of using the <code>repos</code> instance, you&#8217;re forced to fully-qualify every method call with <code>Repository<Customer></code>, which is introducing more noise per-line.</p>

<p>Even though the methods <code>FindByID</code> and <code>Save</code> don&#8217;t have any shared state, they both form a part of the encapsulation of data-access (in this case).</p>

<blockquote><p>If a method forms a key part of an encapsulation, then it shouldn&#8217;t be static.</p></blockquote>

<p>When you make the decision of creating a static method due to it being stateless, you&#8217;re revealing more implementation details than necessary. A big part of encapsulation is hiding implementation details from the consumer.</p>

<p>While the methods are stateless, they might not always be that way; perhaps the repository could share a session between calls in the future. With an instance based design, you won&#8217;t have any problems. Try introducing state into a static method, and things either get very messy, or you end up converting everything to instances and having to rewrite any usages.</p>

<blockquote><p>Static methods tie you in at an early stage to a specific design, making it very difficult to refactor out later.</p></blockquote>

<h2>Not all bad</h2>

<p>So where are the good static methods? <em>The <code>Math</code> class is a good example</em>. It contains a set of functions that are only loosely related (apart from being mathematical), that are guaranteed to be stateless, and most importantly are simple. Architecturally the methods in the <code>Math</code> class could be applied to a wide swath of objects (<code>int</code>, <code>float</code>, <code>double</code>, <code>decimal</code> etc&#8230;) and to have them as instance methods would complicate the class hierarchy more than it would benefit it.</p>

<blockquote><p>Static methods should be fire-and-forget, disposable, simple, and effective.</p></blockquote>

<h2>Object-orientation</h2>

<p>Static methods aren&#8217;t associated with an object, they&#8217;re tied to a type. This is a big distinction. People are under the belief that because statics sit in the same class definition as instance methods, that it makes them object-oriented.</p>

<p>Two key points of object-oriented design that static methods violate are inheritance and polymorphism. The inability to substitute a method with an implementation in a derived class is pretty unforgivable, and heavily restricting.</p>

<h2>Finally, testing</h2>

<p>The argument that you&#8217;re most likely to encounter against using static methods is that of testing. It&#8217;s certainly one that I agree with, I just didn&#8217;t want it to seem like that&#8217;s the main reason of my argument.</p>

<p>Statics are bad for testing because they can&#8217;t be substituted easily. A major part of unit testing is being able to isolate what you&#8217;re testing from it&#8217;s dependencies; isolation allows you to verify one part of the system at a time. Static methods aren&#8217;t overridable in a sub-class, and so they aren&#8217;t mockable either (without the use of TypeMock).</p>

<p>Of the two examples used above, in the first example it would be very hard to test that code without actually going to the database, because of the ties to the static methods. The second example could be refactored so the IRepository dependency is injected, and thus replaceable at test time.</p>

<p>Not being able to test in isolation is the final nail in the coffin for static methods and me.</p>
</div>


  <footer>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
  

<span class="byline author vcard">Text authored by <span class="fn">James Gregory</span></span>


      


    </p>
    <p class="meta">
      
        <a class="basic-alignment left" href="/writings/plug-ins-and-browsers/" title="Previous Post: Plug-in's and browsers">&laquo; Plug-in's and browsers</a>
      
      
        <a class="basic-alignment right" href="/writings/all-about-dependencies/" title="Next Post: All about dependencies">All about dependencies &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Website copyright &copy; 2014 - James Gregory |
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/TheChymera/Koenigspress">Königspress</a></span>.
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jagregory';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
