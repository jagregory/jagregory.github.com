<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>James Gregory</title>
    <meta name="description" content="Jack of all trades, master of none. Principal Consultant at Thoughtworks. Pronouns: he/him
" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/css/main.css" />

</head>
<body class="home-template">

    <header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="/">Home</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">getfilename NAnt task</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2008-03-12">12 Mar 2008</time>
                
            </section>
        </header>

        <section class="post-content">
            <p>As part of my current quest to fully automate our build, I found my self needing the ability to copy a database backup from our remote server. The backup is in a folder along with several other backups, with a filename based on the date. I didn’t fancy trying to programmatically guess the filename, so I wrote an NAnt task to grab the newest file in a directory. Thanks to <a href="http://blogs.geekdojo.net/rcase">Richard Case</a> for his overview of how to <a href="http://blogs.geekdojo.net/rcase/archive/2005/01/06/5971.aspx">create a custom NAnt task</a>.</p>

<p>The <code class="language-plaintext highlighter-rouge">getfilename</code> task simply gets the filename of a file in a directory, then pushes the name into the specified property. The filename to find can be based on the creation date, last modified date etc…</p>

<!-- more -->

<p>The attributes are as follows:</p>

<table class="format-table">
	<thead>
		<tr>
			<th>Attribute</th>
			<th>Description</th>
			<th>Required</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>in</td>
			<td>The directory to search</td>
			<td>Yes</td>
		</tr>
		<tr class="alt">
			<td>property</td>
			<td>The property to push the filename into.</td>
			<td>Yes</td>
		</tr>
		<tr>
			<td>searchPattern</td>
			<td>Wildcard search pattern for finding the file.</td>
			<td>No</td>
		</tr>
		<tr class="alt">
			<td>of</td>
			<td>
				The file to get the filename of.<br /><br />
				<strong>NewestFile</strong> - The most recently created file<br />
				<strong>OldestFile</strong> - The oldest file in the directory<br />
				<strong>FirstModifiedFile</strong> - The file with the oldest last modified date<br />
				<strong>LastModifiedFile</strong> - The most recently modified file<br />
				<strong>FirstFile</strong> - The first file in the directory, using default sorting<br />
				<strong>LastFile</strong> - The last file in the directory, using default sorting<br />
			</td>
			<td>No - Defaults to NewestFile</td>
		</tr>
	</tbody>
</table>

<p>An example usage is:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"Example"</span> <span class="na">default=</span><span class="s">"run"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"run"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;getfilename</span> <span class="na">of=</span><span class="s">"NewestFile"</span> <span class="na">in=</span><span class="s">"C:\path\to\backups"</span> <span class="na">searchPattern=</span><span class="s">"*.bak"</span> <span class="na">property=</span><span class="s">"filename"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;echo</span> <span class="na">message=</span><span class="s">"Filename: ${filename}"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<p>Foreseeable usage situations revolve around anything where you’d need to get the last modified, or newest file in a directory; backups, database scripts etc…</p>

<h2 id="downloads">Downloads</h2>

<blockquote>
  <p>Note from Future James: This is long gone.</p>
</blockquote>

        </section>

        

        <footer class="post-footer">
            <!-- If we want to display author's name and bio -->
            

            
        </footer>
    </article>
</main>

    <footer class="site-footer clearfix">
      <section class="copyright">
        <a href="mailto:james@jagregory.com">James Gregory</a> &copy;
              2022 &bull; <a rel="me" href="https://aus.social/@jagregory">Mastodon</a> &bull; All content licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">cc by-nc-sa 4.0</a>.
      </section>
    </footer>

    <script type="text/javascript" src="/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
</body>
</html>
